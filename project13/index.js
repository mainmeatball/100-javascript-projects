var app=function(e){"use strict";class t{constructor(e,t,s){this.img=e,this.name=t,this.price=s}}class s{constructor(e,t,s){this.field=e,this.name=t,this.boundCallback=s}listen(){this.field.addEventListener(this.name,this.boundCallback)}removeListener(){this.field.removeEventListener(this.name,this.boundCallback)}}function i(e){return(""+e).split(/(?=(?:...)*$)/).join(".")+"$"}class n{constructor(e,t,i,n,o,a){this.shopValues=e,this.image=t,this.name=i,this.price=n,this.removeButton=o,this.domElement=a,this.listeners=[new s(this.removeButton,"click",this.removeItem.bind(this))],this.listeners.forEach(e=>e.listen())}static of(e,t){return new n(t,e.querySelector(".cart-item-image"),e.querySelector(".cart-item-name"),e.querySelector(".cart-item-price"),e.querySelector(".remove"),e.querySelector(".cart-item"))}removeItem(){this.listeners.forEach(e=>e.removeListener()),this.domElement.remove(),this.shopValues.decreaseValues(+(this.price.textContent||"").replace(/[.$]/g,""))}}class o{constructor(e,t,s){this.shoppingWindow=e,this.cartItemTemplate=t,this.shopValues=s,this.items=[],this.shoppingWindowItemsContainer=this.shoppingWindow.querySelector("#items")}addVehicleToCart(e){this.shopValues.increaseValues(e.price),this.addShoppingWindowItem(e)}clearAllItems(){this.items.forEach(e=>e.removeItem()),this.shopValues.nullifyValues()}toggleShoppingList(){this.shoppingWindow.classList.toggle("move-x")}addShoppingWindowItem(e){const t=this.cartItemTemplate.content.cloneNode(!0),s=n.of(t,this.shopValues);s.image.src=e.img,s.name.textContent=e.name,s.price.textContent=i(e.price),this.items.push(s),this.shoppingWindowItemsContainer.appendChild(t)}}o.cars=[new t("../../resources/vehicles/car1.jpg","Ferrari",5e5),new t("../../resources/vehicles/car2.jpg","Lamborghini",499e3)],o.bikes=[new t("../../resources/vehicles/bike1.jpg","Kawasaki",1e5),new t("../../resources/vehicles/bike2.jpg","Samurai",99e3)],o.bicycles=[new t("../../resources/vehicles/bicycle1.jpg","Gucci",5e3),new t("../../resources/vehicles/bicycle2.jpg","Tesla",1e4)],o.planes=[new t("../../resources/vehicles/plane1.jpg","Boeing",1e6),new t("../../resources/vehicles/plane2.jpg","S7",9e5)],o.allVehicles=[...o.cars,...o.bikes,...o.bicycles,...o.planes];class a{constructor(e,t,s,i){this.img=e,this.name=t,this.price=s,this.shopIcon=i}}const r=new class{constructor(e,t,s=0,i=0){this.quantity=e,this.totals=t,this.totalPrice=s,this.totalItems=i}decreaseValues(e){this.decrementQuantity(),this.subtractTotal(e)}increaseValues(e){this.incrementQuantity(),this.addTotal(e)}nullifyValues(){this.nullifyTotal(),this.nullifyQuantity()}incrementQuantity(){this.quantity.textContent=""+ ++this.totalItems}addTotal(e){this.totalPrice+=e,this.totals.forEach(e=>e.textContent=""+this.totalPrice)}decrementQuantity(){this.quantity.textContent=""+--this.totalItems}subtractTotal(e){this.totalPrice-=e,this.totals.forEach(e=>e.textContent=""+this.totalPrice)}nullifyTotal(){this.totalPrice=0,this.totals.forEach(e=>e.textContent=""+this.totalPrice)}nullifyQuantity(){this.totalItems=0,this.quantity.textContent="0"}}(document.getElementById("quantity"),Array.from(document.getElementsByClassName("amount"))),c=new o(document.getElementById("shopping-window"),document.getElementById("cart-item-template"),r),l=new class{constructor(e,t){this.panel=e,this.frameTemplate=t}}(document.getElementById("flex-grid"),document.getElementById("frame-template")),h=new class{constructor(e,t){this.shop=e,this.grid=t}setCards(){o.allVehicles.map(e=>{const t=this.grid.frameTemplate.content.cloneNode(!0),s=new a(t.querySelector(".frame-image"),t.querySelector(".name"),t.querySelector(".price"),t.querySelector(".shop-icon"));return s.img.src=e.img,s.name.textContent=e.name,s.price.textContent=i(e.price),s.shopIcon.addEventListener("click",()=>{this.shop.addVehicleToCart(e)}),t}).forEach(e=>this.grid.panel.appendChild(e))}toggleShoppingList(){this.shop.toggleShoppingList()}clearShoppingCart(){this.shop.clearAllItems()}}(c,l);return e.page=h,e}({});
